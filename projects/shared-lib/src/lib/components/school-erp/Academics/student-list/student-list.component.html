<div class="accre-forms-container card-1">
  <!-- Title and Add Button Section -->
  <div fxLayout="row" fxLayoutAlign="space-between center" class="form-title-container">
    <div fxFlex="80">
      <h3 class="acc-form-title card-title">{{"Student's List"}}</h3>
    </div>
    <div fxFlex="20" class="example-button-row edit-form-btn" fxLayout="row" fxLayoutAlign="end center">

      <p-button icon="pi pi-user" label="Student Profile" (onClick)="studentProfileView($event)"></p-button>
    </div>
  </div>

  <!-- Data Table Section -->
  <div class="nxtPrimeTable">
    <div class="card">
      <div class="formFilterContainer">

        <form class="example-form" (ngSubmit)="isAddForm ? submitForm() : editElement($event)" [formGroup]="form">
          <div fxLayout="row wrap" fxLayoutAlign="space-between center" fxLayoutGap="4px">

            <!-- Select Board -->
            <div class="form-group" fxFlex="1 1 24%">
              <p-dropdown class="full-width-dropdown" [options]="boardList" optionLabel="name"
                placeholder="Select Board" emptyMessage="No Data Found"
                (onChange)="onBoardSelection($event.value, true)">
              </p-dropdown>
            </div>


            <!-- Select Year -->
            <div class="form-group" fxFlex="1 1 24%">
              <p-dropdown class="full-width-dropdown" [options]="academicYearList" optionLabel="current_year"
                placeholder="Select Year" emptyMessage="No Data Found" (onChange)="onYearSelection($event.value,true)">
              </p-dropdown>
            </div>

            <!-- Select Class -->
            <div class="form-group" fxFlex="1 1 24%">


              <p-dropdown class="full-width-dropdown" [options]="academicClassList" optionLabel="class_name"
                placeholder="Select Class" emptyMessage="No Data Found"
                (onChange)="onClassSelection($event.value,true)">
              </p-dropdown>
            </div>


            <div class="form-group" fxFlex="1 1 24%">
              <p-dropdown class="full-width-dropdown" [options]="academicSectionList" optionLabel="section_name"
                placeholder="Select Section" emptyMessage="No Data Found" (onChange)="onSectionSelection($event.value)">
              </p-dropdown>
            </div>


          </div>

        </form>

      </div>


      <p-table #dt2 [value]="academicStudentList" [rows]="10" [rowsPerPageOptions]="[5,10,15,25, 50]"
        [loading]="loading" [paginator]="true"
        [globalFilterFields]="['fullName', 'board', 'schoolGraduationYear', 'status']">
        <!-- Caption with Global Search -->
        <ng-template pTemplate="caption">
          <div class="flex">

            <span class="p-input-icon-left ml-auto nxtTableGlobalSearch">
              <input pInputText type="text" [(ngModel)]="searchValue"
                (input)="dt2.filterGlobal(searchValue, 'contains')" placeholder="Search Here..." />
              <i class="pi pi-search"></i>
            </span>

            <p-button class="nxtTableGlobalClear" label="Clear" [outlined]="true" severity="secondary"
              icon="pi pi-filter-slash" (onClick)="clear(dt2)" />


            <p-button class="nxtTableGlobalAdd" label="Add" [outlined]="true" severity="warning" icon="pi pi-plus"
              (onClick)="openAddDialog()" />

          </div>
        </ng-template>

        <!-- Header with Column Filters -->
        <ng-template pTemplate="header">
          <tr>
            <th>
              <div class="flex align-items-center">
                {{"Name"}}
                <p-columnFilter type="text" field="fullName" display="menu"></p-columnFilter>
              </div>
            </th>
            <th>
              <div class="flex align-items-center">
                {{"Board"}}
                <p-columnFilter type="text" field="board" display="menu"></p-columnFilter>
              </div>
            </th>
            <th>
              <div class="flex align-items-center">
                {{"Year"}}
                <p-columnFilter type="numeric" field="schoolGraduationYear" display="menu"></p-columnFilter>
              </div>
            </th>

            <th>
              <div class="flex align-items-center">
                {{"Status"}}
                <p-columnFilter type="numeric" field="status" display="menu"></p-columnFilter>
              </div>
            </th>


            <th class="nxtPrimeTableAction">{{"Actions"}}</th>
          </tr>
        </ng-template>

        <!-- Body -->
        <ng-template pTemplate="body" let-element>
          <tr>
            <td>{{ element.fullName }}</td>
            <td>{{ element.boardName }}</td>
            <td>{{ element.currentYear }}</td>
            <td>
              <i class="pi" [ngClass]="element.status === 1 ? 'pi-check-circle' : 'pi-exclamation-circle'"
                [style.color]="element.status === 1 ? 'green' : 'red'"
                [pTooltip]="element.status === 1 ? 'Active' : 'in-Active'" tooltipPosition="bottom">
              </i>
            </td>

            <td class="nxtPrimeTableAction">


              <!-- <button pButton icon="pi pi-eye" class="p-button-rounded p-button-text p-button-help"
                (click)="viewElement(element)">
              </button>
              <button pButton icon="pi pi-pencil" class="p-button-rounded p-button-text p-button-success"
                (click)="editElement(element)">
              </button>
              <button pButton icon="pi pi-trash" class="p-button-rounded p-button-text p-button-danger"
                (click)="deleteElement(element)">
              </button> -->


              <p-splitButton [model]="actionItems" icon="pi pi-ellipsis-h" outlined severity="secondary"
                class="nxtPrimeTableAction" (click)="onButtonClick(element)">
              </p-splitButton>

            </td>
          </tr>
        </ng-template>

        <!-- Empty Message -->
        <ng-template pTemplate="emptymessage">
          @if(dt2.columns){
          <tr>
            <td [attr.colspan]="dt2.columns" class="nxtPrimeTableNoDataFound">
              No data found.
            </td>
          </tr>
          }
        </ng-template>
      </p-table>
    </div>

  </div>

</div>


<!-- Loading Spinner with Logo -->
<ngx-loading [show]="loading" [config]="{ 
    backdropBorderRadius: '3px', 
    primaryColour: 'transparent', 
    secondaryColour: 'transparent', 
    tertiaryColour: 'transparent', 
    size: 'large', 
    type: 'circle' 
  }">
</ngx-loading>

<!-- Custom loading image overlay -->
@if(loading){
<ng-container>
  <div class="loading-image-overlay">
    <div class="loader-wrapper">
      <img
        src="https://png.pngtree.com/png-vector/20230415/ourmid/pngtree-school-logo-design-template-vector-png-image_6705854.png"
        alt="Loading Image" class="loading-logo" />
      <div class="spinner"></div>

    </div>
  </div>
</ng-container>

}


<div class="card">
  <p-dialog header="isAddForm ? Add Record:Edit Record " styleClass="nxtGlobalTableHeader" [(visible)]="visible"
    [breakpoints]="{'1199px': '75vw', '575px': '90vw'}" [modal]="true" [closable]="true" [maximizable]="true"
    [baseZIndex]="10000" [style]="{'width': '50vw', 'height': 'auto'}" (onShow)="openAddDialog()">
    <div class="nxtPrimeFormContainer">
      <form (ngSubmit)="submitForm()" [formGroup]="form">
        <div fxLayout="row wrap" fxLayoutAlign="space-between center" fxLayoutGap="10px" class="nxtPrimeFormBlock">


          <h3 fxFlex="0 0 98%">{{"Academic's Details and Personl"}}</h3>


          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>Board</label>
              <p-dropdown class="full-width-dropdown" [options]="boardList" optionLabel="name"
                placeholder="Select Board" emptyMessage="No Data Found"
                (onChange)="onBoardSelection($event.value,false)">
              </p-dropdown>
            </div>
          </div>


          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>Year</label>
              <p-dropdown class="full-width-dropdown" [options]="academicYearList" optionLabel="current_year"
                placeholder="Select Year" emptyMessage="No Data Found" (onChange)="onYearSelection($event.value,false)">
              </p-dropdown>
            </div>
          </div>
          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>Class</label>
              <p-dropdown class="full-width-dropdown" [options]="academicClassList" optionLabel="class_name"
                placeholder="Select Class" emptyMessage="No Data Found"
                (onChange)="onClassSelection($event.value,false)">
              </p-dropdown>
            </div>
          </div>
          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>Section</label>
              <p-dropdown class="full-width-dropdown" [options]="academicSectionList" optionLabel="section_name"
                placeholder="Select Section" emptyMessage="No Data Found"
                (onChange)="onSectionSelection($event.value,false)">
              </p-dropdown>
            </div>
          </div>



          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{"Admission Date"}}</label>
              <p-calendar formControlName="admissionDate" inputId="dob" placeholder="Select Date of Birth"
                dateFormat="dd/mm/yy" showIcon="true" appendTo="body" variant="filled">
              </p-calendar>
            </div>
          </div>

          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{"Admission Number"}}</label>
              <input pInputText formControlName="admissionNumber" type="number" />
            </div>
          </div>


          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>Roll Number</label>
              <input pInputText formControlName="rollNumber" type="text" />
            </div>
          </div>


          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{"First Name as Per SSC"}}</label>
              <input pInputText formControlName="fullName" />
            </div>
          </div>



          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{"First Name"}}</label>
              <input pInputText formControlName="firstName" />
            </div>
          </div>


          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{"Middle Name"}}</label>
              <input pInputText formControlName="middleName" />
            </div>
          </div>


          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{"Last Name"}}</label>
              <input pInputText formControlName="lastName" />
            </div>
          </div>


          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{'Gender'}}</label>
              <p-dropdown class="full-width-dropdown" [options]="genderMetaData" optionLabel="key"
                formControlName="gender" placeholder="Select Section" emptyMessage="No Data Found">
              </p-dropdown>
            </div>
          </div>

          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{"Mother Tongue"}}</label>
              <input pInputText formControlName="motherTongue" />
            </div>
          </div>

          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{"Mother Tongue"}}</label>
              <input pInputText formControlName="motherTongue" />
            </div>
          </div>


          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{'Blood Group'}}</label>
              <p-dropdown class="full-width-dropdown" [options]="bloodGroupList" optionLabel="name"
                formControlName="bloodGroup" placeholder="Select Section" emptyMessage="No Data Found">
              </p-dropdown>
            </div>
          </div>


          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{'Caste Category'}}</label>
              <p-dropdown class="full-width-dropdown" [options]="castCategoryList" optionLabel="name"
                formControlName="category" placeholder="Select Section" emptyMessage="No Data Found">
              </p-dropdown>
            </div>
          </div>


          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{'Select Caste'}}</label>
              <p-dropdown class="full-width-dropdown" [options]="castList" optionLabel="name" formControlName="caste"
                placeholder="Select Section" emptyMessage="No Data Found">
              </p-dropdown>
            </div>
          </div>




          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{"Aadhar Number"}}</label>
              <input pInputText formControlName="aadharNumber" type="number" />
            </div>
          </div>




          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label>{{"Email"}}</label>
              <input pInputText formControlName="email" />
            </div>
          </div>



          <div fxFlex="0 0 48%">
            <div fxLayout="column" class="form-group">
              <label for="dateOfBirth">{{ "Date of Birth" }}</label>
              <p-calendar formControlName="dateOfBirth" inputId="dob" placeholder="Select Date of Birth"
                dateFormat="dd/mm/yy" showIcon="true" appendTo="body" variant="filled">
              </p-calendar>
            </div>
          </div>



          <h3>{{"Address"}}</h3>

          <div fxLayout="row wrap" fxLayoutAlign="space-between center" fxLayoutGap="10px" class="nxtPrimeFormBlock">
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Country</label>
                <p-dropdown class="full-width-dropdown" [options]="countryList" optionLabel="title"
                  formControlName="country" placeholder="Select Country" emptyMessage="No Data Found"
                  (onChange)="updateStates($event.value)">
                </p-dropdown>
              </div>
            </div>

            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>State</label>
                <p-dropdown class="full-width-dropdown" [options]="filteredStates" optionLabel="title"
                  formControlName="state" placeholder="Select State" emptyMessage="No Data Found"
                  (onChange)="updateDistricts($event.value)">
                </p-dropdown>
              </div>
            </div>

            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>{{ "District" }}</label>
                <p-dropdown class="full-width-dropdown" [options]="filteredDistricts" optionLabel="title"
                  placeholder="Select District" formControlName="district" emptyMessage="No Data Found"
                  (onChange)="updateDistricts($event.value)">
                </p-dropdown>
              </div>
            </div>

            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>{{"Pincode"}}</label>
                <input pInputText formControlName="pincode" type="number" />
              </div>
            </div>

            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>{{"Nationality"}}</label>
                <input pInputText formControlName="nationality" />
              </div>
            </div>



            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>{{"Region"}}</label>
                <input pInputText formControlName="region" type="text" />
              </div>
            </div>


            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Address Line 1</label>
                <input pInputText formControlName="addressLine1" />
              </div>
            </div>
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Address Line 2</label>
                <input pInputText formControlName="addressLine2" />
              </div>
            </div>
          </div>

          <h3>{{"Contact Info's"}}</h3>

          <div fxLayout="row wrap" fxLayoutAlign="space-between center" fxLayoutGap="10px" class="nxtPrimeFormBlock">
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Father's Name</label>
                <input pInputText formControlName="fatherName" />
              </div>
            </div>
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Father's Mobile</label>
                <input pInputText formControlName="fatherMobile" type="number" />
              </div>
            </div>
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Father's Email</label>
                <input pInputText formControlName="fatherEmail" type="number" />
              </div>
            </div>
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Father's Occupation</label>
                <input pInputText formControlName="fatherOccupation" />
              </div>
            </div>
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Father's Income</label>
                <input pInputText formControlName="fatherIncome" />
              </div>
            </div>

            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Mother's Name</label>
                <input pInputText formControlName="motherName" />
              </div>
            </div>
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Mother's Mobile</label>
                <input pInputText formControlName="motherMobile" />
              </div>
            </div>
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Mother's Email</label>
                <input pInputText formControlName="motherEmail" />
              </div>
            </div>
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Mother's Occupation</label>
                <input pInputText formControlName="motherOccupation" />
              </div>
            </div>
            <div fxFlex="0 0 48%">
              <div fxLayout="column" class="form-group">
                <label>Mother's Income</label>
                <input pInputText formControlName="motherIncome" />
              </div>
            </div>
          </div>




        </div>


        <div class="p-dialog-footer nxtPrimeFormAction">
          <div class fxLayout="row wrap" fxLayoutGap="10px" fxLayoutAlign="end center">
            <p-button type="submit" label="Submit" severity="success" [rounded]="true" size="small" icon="pi pi-check"
              [disabled]="!form.valid" (click)="submitForm()" />
            <p-button label="Cancel" severity="warning" [rounded]="true" icon="pi pi-times" size="small" />
          </div>
        </div>

      </form>
    </div>

  </p-dialog>
</div>





<div class="card">
  <p-dialog header="particulars" styleClass="nxtGlobalTableHeader nxtPrimaGlobalTabModalTitle"
    [(visible)]="isprofileView" [breakpoints]="{'1199px': '75vw', '575px': '90vw'}" [modal]="true" [closable]="true"
    [maximizable]="true" [baseZIndex]="10000" [style]="{'width': '90vw', 'height': 'auto'}"
    (onShow)="studentProfileView($event)">
    <div class="nxtPrimeStudentProfileView nxtPrimaGlobalTabs">

      <p-tabMenu [model]="profileViewItems" [(activeItem)]="profileViewActiveItem">
        <ng-template pTemplate="item" let-item>
          <a pRipple class="flex align-items-center gap-2 p-menuitem-link">
            <i [class]="item.icon" style="font-size: 1.5rem;"></i>
            <span class="font-bold">{{ item.label }}</span>
          </a>
        </ng-template>
      </p-tabMenu>
      <div class="tab-content mt-3">
        <ng-container *ngIf="profileViewActiveItem">
          <!-- Conditional Content for Each Tab -->
          <ng-container [ngSwitch]="profileViewActiveItem.isfor">
            <!-- Profile View -->
            <div *ngSwitchCase="'profileView'">

              <div class="nxtStdProfileBlock" fxLayout="row" fxFlexAlign="space-between start" fxLayoutGap="10px">
                <!-- Left Block -->
                <div class="nxtStdProfileBlockLeft" fxLayout="row" fxFlexAlign="space-between start" fxLayoutGap="5px"
                  fxFlex="70">
                  <!-- Left Section -->
                  <div class="nxtStdProfileContainer" fxFlex="20">
                    <div class="profilerBlock">
                      <p-image
                        src="https://img.freepik.com/premium-photo/portrait-documents-passport-photo-young-female-natural-look_100800-10816.jpg"
                        alt="Image" width="110" height="110" border-radius="50%" z-index="1099" [preview]="true" />

                    </div>

                    <h3 class="studentRollNumber">
                      <i class="pi pi-hashtag"></i>{{ "2432094354" }}
                    </h3>

                    <h5 class="studentEmail">
                      <i class="pi pi-address-book"></i> {{ "RobertAlkine@mail.com" }}
                    </h5>

                    <h5 class="studentEmail">
                      <i class="pi pi-calendar"></i> D.O.B: {{ "23/12/2018" }}
                    </h5>

                    <h5 class="studentEmail">
                      <i class="pi pi-objects-column"></i> <span>Mother Tongue:</span> {{ "English" }}
                    </h5>

                    <h5 class="studentEmail">
                      <i class="pi pi-wave-pulse"></i> <span>Religion:</span> {{ "Hindu" }}
                    </h5>
                  </div>

                  <!-- Right Section -->
                  <!-- Right Section -->
                  <div class="nxtStdProfileContainerDetails" fxFlex="80" fxLayout="row wrap"
                    fxFlexAlign="space-between start" fxLayoutGap="5px">

                    <!-- Contact Information -->
                    <div class="section" fxFlex="95">
                      <h3>Contact Information</h3>
                      <p><strong> <i class="pi pi-phone"></i> Phone:</strong> {{ stdProfileData[0].contact.phone }}</p>
                      <p><strong> <i class="pi pi-home"></i> Address:</strong> {{ stdProfileData[0].contact.address }}
                      </p>
                    </div>

                    <!-- Academic Information -->
                    <div class="section" fxFlex="95">
                      <h3>Academic Information</h3>
                      <ul>
                        <li><i class="pi pi-id-card"></i> <strong>Branch ID:</strong> {{ stdProfileData[0].branch_id }}
                        </li>
                        <li><i class="pi pi-book"></i> <strong>Board:</strong> {{ stdProfileData[0].board }}</li>
                        <li><i class="pi pi-calendar"></i> <strong>Year:</strong> {{ stdProfileData[0].year }}</li>
                        <li><i class="pi pi-list"></i> <strong>Program ID:</strong> {{ stdProfileData[0].program_id }}
                        </li>
                        <li><i class="pi pi-users"></i> <strong>Group ID:</strong> {{ stdProfileData[0].group_id }}</li>
                        <li><i class="pi pi-user"></i> <strong>Faculty ID:</strong> {{ stdProfileData[0].faculty_id }}
                        </li>
                        <li><i class="pi pi-building"></i> <strong>Class ID:</strong> {{ stdProfileData[0].class_id }}
                        </li>
                        <li><i class="pi pi-map"></i> <strong>Section ID:</strong> {{ stdProfileData[0].section_id }}
                        </li>
                        <li><i class="pi pi-clock"></i> <strong>Session ID:</strong> {{ stdProfileData[0].session_id }}
                        </li>
                      </ul>

                    </div>

                    <!-- Admission Details -->
                    <div class="section" fxFlex="95">
                      <h3>Admission Details</h3>
                      <ul>
                        <li><i class="pi pi-id-card"></i> <strong>Student ID:</strong> {{ stdProfileData[0].student_id
                          }}</li>
                        <li><i class="pi pi-file"></i> <strong>Registration No:</strong> {{
                          stdProfileData[0].registration_no }}</li>
                        <li><i class="pi pi-book"></i> <strong>Admission No:</strong> {{ stdProfileData[0].admission_no
                          }}</li>
                        <li><i class="pi pi-user"></i> <strong>Roll No:</strong> {{ stdProfileData[0].roll_no }}</li>
                        <li><i class="pi pi-list"></i> <strong>Admission Type ID:</strong> {{
                          stdProfileData[0].admission_type_id }}</li>
                        <li><i class="pi pi-users"></i> <strong>Seat Type ID:</strong> {{ stdProfileData[0].seat_type_id
                          }}</li>
                        <li><i class="pi pi-calendar"></i> <strong>Admission Date:</strong> {{
                          stdProfileData[0].admission_date | date }}</li>
                        <li><i class="pi pi-clock"></i> <strong>Joining Date:</strong> {{ stdProfileData[0].joining_date
                          | date }}</li>
                        <li><i class="pi pi-map-marker"></i> <strong>Distance from Residence:</strong> {{
                          stdProfileData[0].distance_from_residence }}</li>
                      </ul>

                    </div>

                    <!-- Permanent Address -->
                    <div class="section address" fxFlex="45">
                      <h3>Permanent Address:</h3>
                      <ul>
                        <li><i class="pi pi-globe"></i> <strong>Country:</strong> {{
                          stdProfileData[0].present_address.country }}</li>
                        <li><i class="pi pi-map-marker"></i> <strong>State:</strong> {{
                          stdProfileData[0].present_address.state }}</li>
                        <li><i class="pi pi-map-marker"></i> <strong>District:</strong> {{
                          stdProfileData[0].present_address.district }}</li>
                        <li><i class="pi pi-hashtag"></i> <strong>Pincode:</strong> {{
                          stdProfileData[0].present_address.pincode }}</li>
                        <li><i class="pi pi-home"></i> <strong>Address 1:</strong> {{
                          stdProfileData[0].present_address.address_1 }}</li>

                      </ul>

                    </div>

                    <!-- Present Address -->
                    <div class="section address" fxFlex="45">
                      <h3><i class="pi pi-map"></i> Present Address:</h3>

                      <ul>
                        <li><i class="pi pi-globe"></i> <strong>Country:</strong> {{
                          stdProfileData[0].present_address.country }}</li>
                        <li><i class="pi pi-map-marker"></i> <strong>State:</strong> {{
                          stdProfileData[0].present_address.state }}</li>
                        <li><i class="pi pi-map-marker"></i> <strong>District:</strong> {{
                          stdProfileData[0].present_address.district }}</li>
                        <li><i class="pi pi-hashtag"></i> <strong>Pincode:</strong> {{
                          stdProfileData[0].present_address.pincode }}</li>
                        <li><i class="pi pi-home"></i> <strong>Address 1:</strong> {{
                          stdProfileData[0].present_address.address_1 }}</li>

                      </ul>

                    </div>

                  </div>




                </div>

                <!-- Right Block -->
                <div class="nxtStdProfileBlockRight nxtStdProfileContainerDetails" fxFlex="30" fxLayout="row wrap">
                  <!-- Attendance Information -->
                  <div class="attendance section" fxFlex="95">
                    <h3><i class="pi pi-calendar"></i> Attendance Information</h3>
                    <ul>
                      <li><i class="pi pi-book"></i> <strong>Total Classes Held:</strong> {{
                        stdProfileData[0].attendance.total_classes }}
                      </li>
                      <li><i class="pi pi-check"></i> <strong>Classes Attended:</strong> {{
                        stdProfileData[0].attendance.classes_attended }}
                      </li>
                      <li><i class="pi pi-percentage"></i> <strong>Attendance Percentage:</strong> {{
                        stdProfileData[0].attendance.attendance_percentage }}%</li>
                      <li><i class="pi pi-times"></i> <strong>Classes Absent:</strong> {{
                        stdProfileData[0].attendance.total_classes -
                        stdProfileData[0].attendance.classes_attended }}</li>
                      <li><i class="pi pi-clock"></i> <strong>Late Attendance:</strong> {{
                        stdProfileData[0].attendance.attendance_percentage ||
                        '0' }}</li>
                      <li>
                        <i class="pi pi-info-circle"></i> <strong>Attendance Status:</strong>
                        <span
                          [ngClass]="{ 'text-success': stdProfileData[0].attendance.attendance_percentage >= 75, 'text-warning': stdProfileData[0].attendance.attendance_percentage >= 50 && stdProfileData[0].attendance.attendance_percentage < 75, 'text-danger': stdProfileData[0].attendance.attendance_percentage < 50 }">
                          {{ stdProfileData[0].attendance.attendance_percentage >= 75 ? 'Good' :
                          (stdProfileData[0].attendance.attendance_percentage >= 50 ? 'Needs Improvement' : 'Low
                          Attendance') }}
                        </span>
                      </li>
                    </ul>

                  </div>


                  <div class="transport section" fxFlex="95">
                    <h3><i class="pi pi-bus"></i> Transport Route Information</h3>
                    <ul>
                      <li><i class="pi pi-route"></i> <strong>Route Number:</strong> {{"T1001" }}</li>
                      <li><i class="pi pi-map-marker"></i> <strong>Bus Stop:</strong> {{"Main Campus"}}</li>
                      <li><i class="pi pi-clock"></i> <strong>Departure Time:</strong> {{"2025-01-30T08:30:00" }}</li>
                      <li><i class="pi pi-car"></i> <strong>Vehicle Number:</strong> {{"2025-01-30"}}</li>
                      <li><i class="pi pi-info-circle"></i> <strong>Transport Status:</strong>
                        <span>
                          {{ "Active" }}
                        </span>
                      </li>
                    </ul>

                  </div>

                </div>
              </div>




            </div>

            <!-- Academic Details -->
            <div *ngSwitchCase="'academicDetails'">
              <p>Here are the Academic Details.</p>

              <p-table #dt2 [value]="academicStudentList" [rows]="10" [rowsPerPageOptions]="[5,10,15,25, 50]"
                [loading]="loading" [paginator]="true"
                [globalFilterFields]="['fullName', 'board', 'schoolGraduationYear', 'status']">
                <!-- Caption with Global Search -->
                <ng-template pTemplate="caption">
                  <div class="flex">

                    <span class="p-input-icon-left ml-auto nxtTableGlobalSearch">
                      <input pInputText type="text" [(ngModel)]="searchValue"
                        (input)="dt2.filterGlobal(searchValue, 'contains')" placeholder="Search Here..." />
                      <i class="pi pi-search"></i>
                    </span>

                    <p-button class="nxtTableGlobalClear" label="Clear" [outlined]="true" severity="secondary"
                      icon="pi pi-filter-slash" (onClick)="clear(dt2)" />


                    <p-button class="nxtTableGlobalAdd" label="Add" [outlined]="true" severity="warning"
                      icon="pi pi-plus" (onClick)="openAddDialog()" />

                  </div>
                </ng-template>

                <!-- Header with Column Filters -->
                <ng-template pTemplate="header">
                  <tr>
                    <th>
                      <div class="flex align-items-center">
                        {{"Name"}}
                        <p-columnFilter type="text" field="fullName" display="menu"></p-columnFilter>
                      </div>
                    </th>
                    <th>
                      <div class="flex align-items-center">
                        {{"Board"}}
                        <p-columnFilter type="text" field="board" display="menu"></p-columnFilter>
                      </div>
                    </th>
                    <th>
                      <div class="flex align-items-center">
                        {{"(Year)"}}
                        <p-columnFilter type="numeric" field="schoolGraduationYear" display="menu"></p-columnFilter>
                      </div>
                    </th>

                    <th>
                      <div class="flex align-items-center">
                        {{"Status"}}
                        <p-columnFilter type="numeric" field="status" display="menu"></p-columnFilter>
                      </div>
                    </th>


                    <th class="nxtPrimeTableAction">{{"Actions"}}</th>
                  </tr>
                </ng-template>

                <!-- Body -->
                <ng-template pTemplate="body" let-element>
                  <tr>
                    <td>{{ element.fullName }}</td>
                    <td>{{ element.boardName }}</td>
                    <td>{{ element.currentYear }}</td>
                    <td>
                      <i class="pi" [ngClass]="element.status === 1 ? 'pi-check-circle' : 'pi-exclamation-circle'"
                        [style.color]="element.status === 1 ? 'green' : 'red'"
                        [pTooltip]="element.status === 1 ? 'Active' : 'in-Active'" tooltipPosition="bottom">
                      </i>
                    </td>

                    <td class="nxtPrimeTableAction">

                      <p-splitButton [model]="actionItems" icon="pi pi-ellipsis-h" outlined severity="secondary"
                        class="nxtPrimeTableAction" (click)="onButtonClick(element)">
                      </p-splitButton>

                    </td>
                  </tr>
                </ng-template>

                <!-- Empty Message -->
                <ng-template pTemplate="emptymessage">
                  @if(dt2.columns){
                  <tr>
                    <td [attr.colspan]="dt2.columns" class="nxtPrimeTableNoDataFound">
                      No data found.
                    </td>
                  </tr>
                  }
                </ng-template>
              </p-table>
            </div>

            <!-- Attendance -->
            <div *ngSwitchCase="'attendance'">
              <!-- <p>Attendance records will be shown here.</p> -->

              <div class="particularAttendance" fxLayout="row" fxLayoutAlign="space-between center">


                <div class="attendanceBlock attendancePrimary" fxFlex="15" fxLayout="row"
                  fxLayoutAlign="space-between center">
                  <img src="../../../../assets/svg/particularAttendance-7.svg" alt="" class="imgLogo">
                  <div class="attendanceBlockValue" fxLayout="column">
                    <h4 class="attendancePrimary">2</h4>
                    <p class="nameofAttendance">Absent</p>
                  </div>
                </div>



                <div class="attendanceBlock attendanceGreen" fxFlex="15" fxLayout="row"
                  fxLayoutAlign="space-between center">
                  <img src="../../../../assets/svg/particularAttendance-3.svg" alt="" class="imgLogo">
                  <div class="attendanceBlockValue" fxLayout="column">
                    <h4 class="attendanceGreen">23</h4>
                    <p class="nameofAttendance">Present</p>
                  </div>
                </div>




                <div class="attendanceBlock attendanceOrange" fxFlex="15" fxLayout="row"
                  fxLayoutAlign="space-between center">
                  <img src="../../../../assets/svg/particularAttendance-1.svg" alt="" class="imgLogo">
                  <div class="attendanceBlockValue" fxLayout="column">
                    <h4 class="attendanceOrange">1</h4>
                    <p class="nameofAttendance">Late</p>
                  </div>
                </div>






                <div class="attendanceBlock attendanceSkyBlue" fxFlex="15" fxLayout="row"
                  fxLayoutAlign="space-between center">
                  <img src="../../../../assets/svg/particularAttendance-6.svg" alt="" class="imgLogo">
                  <div class="attendanceBlockValue" fxLayout="column">
                    <h4 class="attendanceSkyBlue">25</h4>
                    <p class="nameofAttendance">Total</p>
                  </div>
                </div>


              </div>

              <div class="particularAttGraph" fxLayout="row" fxLayoutAlign="space-between center">

                <div class="graphBlock">

                  <!-- <google-chart [type]="myTypePie" [data]="myDataPie"></google-chart> -->
                  <canvas id="lineChart"></canvas>

                </div>


                <div class="graphBlock"></div>
                <div class="graphBlock"></div>
              </div>

            </div>


            <div *ngSwitchCase="'certificates'" class="particularCertificates">

              <div class="particularCertificatesBlock" fxLayout="row" fxLayoutAlign="space-between center">
                <!-- Applied -->
                <div class="particularCertificate appiled" flexLayOutGap="5px" fxLayout="row"
                  fxLayoutAlign="space-between center" fxFlex="23">
                  <div class="particularCertificateLeft">
                    <h4>Applied</h4>
                  </div>
                  <div class="particularCertificateRight">
                    <img src="../../../../assets/svg/dash-attendance.svg" alt="Applied Icon">
                  </div>
                </div>

                <!-- Pending -->
                <div class="particularCertificate pending" fxLayout="row" fxLayoutAlign="space-between center"
                  fxFlex="23">
                  <div class="particularCertificateLeft">
                    <h4>Pending</h4>
                  </div>
                  <div class="particularCertificateRight">
                    <img src="../../../../assets/svg/dash-exclamation-mark.svg" alt="Pending Icon">
                  </div>
                </div>

                <!-- Rejected -->
                <div class="particularCertificate rejcetd" fxLayout="row" fxLayoutAlign="space-between center"
                  fxFlex="23">
                  <div class="particularCertificateLeft">
                    <h4>Rejected</h4>
                  </div>
                  <div class="particularCertificateRight">
                    <img src="../../../../assets/svg/dash-exclamation-mark.svg" alt="Pending Icon">
                  </div>
                </div>

                <!-- Approved -->
                <div class="particularCertificate approved" fxLayout="row" fxLayoutAlign="space-between center"
                  fxFlex="23">
                  <div class="particularCertificateLeft">
                    <h4>Approved</h4>
                  </div>
                  <div class="particularCertificateRight">
                    <img src="../../../../assets/svg/dash-exclamation-mark.svg" alt="Pending Icon">
                  </div>
                </div>



              </div>


              <p-table #dt2 [value]="academicStudentList" [rows]="10" [rowsPerPageOptions]="[5,10,15,25, 50]"
                [loading]="loading" [paginator]="true"
                [globalFilterFields]="['fullName', 'board', 'schoolGraduationYear', 'status']">
                <!-- Caption with Global Search -->
                <ng-template pTemplate="caption">
                  <div class="flex">

                    <span class="p-input-icon-left ml-auto nxtTableGlobalSearch">
                      <input pInputText type="text" [(ngModel)]="searchValue"
                        (input)="dt2.filterGlobal(searchValue, 'contains')" placeholder="Search Here..." />
                      <i class="pi pi-search"></i>
                    </span>

                    <p-button class="nxtTableGlobalClear" label="Clear" [outlined]="true" severity="secondary"
                      icon="pi pi-filter-slash" (onClick)="clear(dt2)" />


                    <p-button class="nxtTableGlobalAdd" label=" Apply Certificate" [outlined]="true" severity="warning"
                      icon="pi pi-plus" (onClick)="openAddDialog()" />

                  </div>
                </ng-template>

                <!-- Header with Column Filters -->
                <ng-template pTemplate="header">
                  <tr>
                    <th>
                      <div class="flex align-items-center">
                        {{"Name"}}
                        <p-columnFilter type="text" field="fullName" display="menu"></p-columnFilter>
                      </div>
                    </th>
                    <th>
                      <div class="flex align-items-center">
                        {{"Board"}}
                        <p-columnFilter type="text" field="board" display="menu"></p-columnFilter>
                      </div>
                    </th>
                    <th>
                      <div class="flex align-items-center">
                        {{"(Year)"}}
                        <p-columnFilter type="numeric" field="schoolGraduationYear" display="menu"></p-columnFilter>
                      </div>
                    </th>

                    <th>
                      <div class="flex align-items-center">
                        {{"Status"}}
                        <p-columnFilter type="numeric" field="status" display="menu"></p-columnFilter>
                      </div>
                    </th>


                    <th class="nxtPrimeTableAction">{{"Actions"}}</th>
                  </tr>
                </ng-template>

                <!-- Body -->
                <ng-template pTemplate="body" let-element>
                  <tr>
                    <td>{{ element.fullName }}</td>
                    <td>{{ element.boardName }}</td>
                    <td>{{ element.currentYear }}</td>
                    <td>
                      <i class="pi" [ngClass]="element.status === 1 ? 'pi-check-circle' : 'pi-exclamation-circle'"
                        [style.color]="element.status === 1 ? 'green' : 'red'"
                        [pTooltip]="element.status === 1 ? 'Active' : 'in-Active'" tooltipPosition="bottom">
                      </i>
                    </td>

                    <td class="nxtPrimeTableAction">

                      <p-splitButton [model]="actionItems" icon="pi pi-ellipsis-h" outlined severity="secondary"
                        class="nxtPrimeTableAction" (click)="onButtonClick(element)">
                      </p-splitButton>

                    </td>
                  </tr>
                </ng-template>

                <!-- Empty Message -->
                <ng-template pTemplate="emptymessage">
                  @if(dt2.columns){
                  <tr>
                    <td [attr.colspan]="dt2.columns" class="nxtPrimeTableNoDataFound">
                      No data found.
                    </td>
                  </tr>
                  }
                </ng-template>
              </p-table>
            </div>

            <!-- Library -->
            <div *ngSwitchCase="'library'">
              <p>Library details and resources can be accessed here.</p>
            </div>

            <!-- Fee -->
            <div *ngSwitchCase="'fee'">
              <p>Manage and view Fee details here.</p>
            </div>

            <!-- Transport -->
            <div *ngSwitchCase="'transport'">
              <p>Check Transport schedules and routes.</p>
            </div>

            <!-- Communication -->
            <div *ngSwitchCase="'communication'">
              <p>Communication records and messages are displayed here.</p>
            </div>

            <!-- Grievance & Activities -->
            <div *ngSwitchCase="'grivinace'">
              <p>View and manage Grievances and Activities here.</p>
            </div>

            <!-- Settings -->
            <div *ngSwitchCase="'settings'">
              <p>Adjust your settings here.</p>
            </div>

            <!-- Default Case -->
            <div *ngSwitchDefault>
              <p>No content available for this tab.</p>
            </div>
          </ng-container>
        </ng-container>

      </div>

    </div>

  </p-dialog>
</div>